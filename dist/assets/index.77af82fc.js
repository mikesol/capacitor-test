(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const b="/assets/bitcrusher-24bits-1x-downsampling.b29549d4.mp3";let r;const d=document.querySelector('button[name="start"]'),h=document.querySelector('button[name="stop"]');document.querySelector('button[name="info"]');const c=document.querySelector('input[name="downsampling"]'),m=document.querySelector(".downsampling-value"),l=document.querySelector('input[name="bits"]'),p=document.querySelector(".bits-value"),s=document.querySelector('input[name="volume"]'),f=document.querySelector(".volume-value"),w=document.querySelectorAll('input[name="source-selector"]');document.querySelector(".source-selector");const L={bitDepth:2,downsampling:1};d.addEventListener("click",v);p.innerText=l.value;f.innerText=s.value;m.innerText=c.value;s.addEventListener("input",({target:n})=>{f.innerText=n.value});l.addEventListener("input",({target:n})=>{p.innerText=n.value});c.addEventListener("input",({target:n})=>{m.innerText=n.value});async function v(){r=new AudioContext;let n;const u=[...w].filter(o=>o.checked)[0].value;if(u==="audio"){const y=await(await fetch(b)).arrayBuffer(),g=await r.decodeAudioData(y);n=r.createBufferSource(),n.buffer=g}else n=r.createOscillator(),n.frequency.value=440,n.type=u;await r.audioWorklet.addModule("bitcrusher.js");const a=new AudioWorkletNode(r,"bitcrusher",{parameterData:L}),i=a.parameters.get("bitDepth"),e=a.parameters.get("downsampling"),t=r.createGain();t.gain.value=s.value,s.addEventListener("input",({target:o})=>{t.gain.value=parseFloat(o.value)}),c.addEventListener("input",({target:o})=>{e.value=parseInt(o.value)}),l.addEventListener("input",({target:o})=>{i.value=parseInt(o.value)}),h.addEventListener("click",()=>{n.stop()}),n.connect(a),a.connect(t),t.connect(r.destination),n.start()}d.addEventListener("click",v);
